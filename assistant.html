<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Assistente IA MakerAI</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,sans-serif}
body{background:transparent;height:100vh;overflow:hidden}
.assistant-panel{
  position:fixed;inset:0;
  background:linear-gradient(135deg,#0b0018,#000);
  color:#fff;
  display:flex;flex-direction:column;
  border-radius:24px;overflow:hidden;
}
.chat-header{
  padding:12px 16px;
  background:linear-gradient(to right,rgba(124,58,237,.25),rgba(0,0,0,.6));
  display:flex;align-items:center;justify-content:space-between;
  border-bottom:1px solid rgba(255,255,255,.1)
}
.chat-header h3{font-size:17px;display:flex;align-items:center;gap:10px}
.chat-header i{color:#8b5cf6}
.close-btn{
  background:rgba(255,255,255,.1);border:none;color:#fff;
  width:40px;height:40px;border-radius:50%;
  cursor:pointer
}
.messages{
  flex:1;overflow-y:auto;padding:16px;
  display:flex;flex-direction:column;gap:12px;
  scroll-behavior:smooth
}
.message{
  max-width:88%;
  padding:14px 18px;
  border-radius:18px;
  line-height:1.5;
  font-size:15px;
  animation:fade .25s ease
}
@keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1}}
.user{align-self:flex-end;background:linear-gradient(135deg,#7c3aed,#5b21b6);border-bottom-right-radius:6px}
.ai{align-self:flex-start;background:rgba(255,255,255,.08);border-bottom-left-radius:6px}
.typing{
  display:flex;gap:6px;
  padding:12px 16px;
  background:rgba(255,255,255,.08);
  border-radius:16px;width:fit-content
}
.typing span{
  width:8px;height:8px;border-radius:50%;
  background:#8b5cf6;
  animation:blink 1.4s infinite both
}
.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}
@keyframes blink{0%,100%{opacity:.3}50%{opacity:1}}

.quick-box{
  padding:10px 14px;
  border-top:1px solid rgba(255,255,255,.1);
  background:rgba(0,0,0,.85)
}
.quick{
  display:flex;gap:10px;overflow-x:auto
}
.quick button{
  padding:10px 14px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  color:#fff;border-radius:16px;
  cursor:pointer;white-space:nowrap
}
.quick button:hover{background:rgba(124,58,237,.4)}

.input-box{
  display:flex;gap:10px;
  padding:12px 16px;
  border-top:1px solid rgba(255,255,255,.1);
  background:rgba(0,0,0,.9)
}
input{
  flex:1;padding:12px 16px;
  border-radius:20px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.08);
  color:#fff;outline:none
}
.send{
  width:44px;height:44px;border-radius:50%;
  border:none;
  background:linear-gradient(135deg,#8b5cf6,#5b21b6);
  color:#fff;cursor:pointer
}
</style>
</head>

<body>
<div class="assistant-panel">

  <div class="chat-header">
    <h3><i class="fas fa-robot"></i> Assistente MakerAI</h3>
    <button class="close-btn" onclick="window.parent.postMessage({type:'CLOSE_ASSISTANT'},'*')">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="messages" id="messages"></div>

  <div class="quick-box">
    <div class="quick" id="quick"></div>
  </div>

  <div class="input-box">
    <input id="input" placeholder="Digite sua mensagem..." />
    <button class="send" id="send"><i class="fas fa-paper-plane"></i></button>
  </div>

</div>

<script>
const messages=document.getElementById("messages");
const input=document.getElementById("input");
const quick=document.getElementById("quick");

let history=JSON.parse(localStorage.getItem("makerai_chat")||"[]");
let busy=false;

const intros=[
 "Boa pergunta!",
 "Perfeito.",
 "Ã“timo ponto.",
 "Vamos lÃ¡.",
 "Te explico agora."
];

const responses={
 servicos:`Criamos soluÃ§Ãµes modernas ðŸš€

â€¢ Sites e PWAs premium  
â€¢ Sistemas com IA  
â€¢ Chatbots e assistentes  
â€¢ AutomaÃ§Ãµes inteligentes  
â€¢ Apps mobile  

O que vocÃª quer explorar primeiro?`,
 preco:`Os valores variam conforme escopo ðŸ’°

Sites/PWAs â†’ a partir de R$ 8k  
Sistemas com IA â†’ a partir de R$ 40k  
AutomaÃ§Ãµes â†’ a partir de R$ 12k  
Apps â†’ a partir de R$ 30k  

Quer uma estimativa mais precisa?`,
 prazo:`Os prazos mÃ©dios sÃ£o:

ProtÃ³tipo â†’ 1â€“2 semanas  
Projeto completo â†’ 4â€“8 semanas  
IA avanÃ§ada â†’ atÃ© 12 semanas  

Tem alguma data em mente?`,
 portfolio:`Temos projetos com:

â€¢ IA conversacional  
â€¢ Dashboards em tempo real  
â€¢ Apps e plataformas educacionais  
â€¢ AutomaÃ§Ãµes corporativas  

Quer ver algo mais tÃ©cnico ou visual?`,
 contato:`Perfeito ðŸ˜„  

Posso te direcionar para contato agora ou coletar algumas infos antes.

Como prefere seguir?`
};

function addMessage(text,type,typing=false){
 const div=document.createElement("div");
 div.className=`message ${type}`;
 messages.appendChild(div);
 messages.scrollTop=messages.scrollHeight;

 if(type==="ai" && typing){
   typeEffect(div,text);
 }else{
   div.innerHTML=text.replace(/\n/g,"<br>");
 }
}

function typeEffect(el,text){
 let i=0;
 el.innerHTML="";
 const t=setInterval(()=>{
   el.innerHTML+=text.charAt(i)==="\n"?"<br>":text.charAt(i);
   i++;messages.scrollTop=messages.scrollHeight;
   if(i>=text.length)clearInterval(t);
 },14);
}

function typingOn(){
 const t=document.createElement("div");
 t.className="typing";t.id="typing";
 t.innerHTML="<span></span><span></span><span></span>";
 messages.appendChild(t);
 messages.scrollTop=messages.scrollHeight;
}
function typingOff(){
 const t=document.getElementById("typing");
 if(t)t.remove();
}

function showQuick(opts){
 quick.innerHTML="";
 opts.forEach(o=>{
   const b=document.createElement("button");
   b.textContent=o;
   b.onclick=()=>send(o);
   quick.appendChild(b);
 });
}

function getResponse(msg){
 const t=msg.toLowerCase();
 if(/serv/i.test(t))return responses.servicos;
 if(/pre|valor|custo|orÃ§/i.test(t))return responses.preco;
 if(/prazo|tempo|entrega/i.test(t))return responses.prazo;
 if(/port|case|exemplo/i.test(t))return responses.portfolio;
 if(/cont|whats|email/i.test(t))return responses.contato;
 if(/oi|olÃ¡|bom dia|boa/i.test(t))
   return "Oi! ðŸ˜Š Posso te ajudar com serviÃ§os, valores, prazos ou portfÃ³lio. O que vocÃª quer ver?";
 return "Entendi ðŸ‘ Me explica sÃ³ um pouco mais pra eu te ajudar melhor.";
}

function send(text){
 if(busy)return;
 busy=true;
 addMessage(text,"user");
 history.push({r:"u",t:text});
 localStorage.setItem("makerai_chat",JSON.stringify(history));
 input.value="";
 typingOn();

 setTimeout(()=>{
   typingOff();
   const intro=intros[Math.floor(Math.random()*intros.length)];
   const reply=intro+"\n\n"+getResponse(text);
   addMessage(reply,"ai",true);
   history.push({r:"a",t:reply});
   localStorage.setItem("makerai_chat",JSON.stringify(history));
   showQuick(["ServiÃ§os","OrÃ§amento","Prazos","PortfÃ³lio","Contato"]);
   busy=false;
 },900+Math.random()*600);
}

document.getElementById("send").onclick=()=>{if(input.value.trim())send(input.value)};
input.addEventListener("keypress",e=>{if(e.key==="Enter"&&input.value.trim())send(input.value)});

window.addEventListener("load",()=>{
 if(history.length){
   history.forEach(m=>addMessage(m.t,m.r==="u"?"user":"ai"));
 }else{
   addMessage(
     "Oi! ðŸ‘‹ Sou o assistente da MakerAI.\n\nPosso te ajudar com ideias, projetos, valores ou IA.",
     "ai"
   );
 }
 showQuick(["ServiÃ§os","PortfÃ³lio","OrÃ§amento"]);
});
</script>
</body>
</html>